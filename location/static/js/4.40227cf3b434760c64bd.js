webpackJsonp([4],{Oh7c:function(e,t){},Zw6q:function(e,t){},ho59:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("woOf"),n=r.n(s),c={props:["type","selectDevice"],data:function(){return{btns:{comfirm:"确定",cancel:"取消"},deviceInfo:{userName:"",userDeviceId:"",userGender:"",userNumber:"",userBirth:"",userAddress:"",emergencycs:[{emergencycsName:"",emergencycsRelationShip:"",emergencycsNumber:"",emergencycrsNumber1:""},{emergencycsName:"",emergencycsRelationShip:"",emergencycsNumber:"",emergencycrsNumber1:""}]},isEditor:!1}},components:{MessageBox:r("7en9").a},methods:{changeDevice:function(e){this.selectDevice?this.$emit("editorDevice",e,this.deviceInfo):this.$emit("addDevice",e,this.deviceInfo)}},created:function(){if(console.log(this.selectDevice),this.selectDevice){this.isEditor=!0;var e=n()({},this.selectDevice.row);this.deviceInfo=e,this.deviceInfo.userGender=this.deviceInfo.userGender+""}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-box",{staticClass:"add_person",attrs:{type:e.type,btns:e.btns},on:{closeMessageBox:e.changeDevice}},[r("el-main",[r("div",{staticClass:"user"},[r("el-row",[r("label",{attrs:{for:""}},[e._v("设备ID")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.userDeviceId,expression:"deviceInfo.userDeviceId"}],attrs:{type:"text",disabled:e.selectDevice},domProps:{value:e.deviceInfo.userDeviceId},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo,"userDeviceId",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("佩戴人")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.userName,expression:"deviceInfo.userName"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.userName},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo,"userName",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("联系电话")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.userNumber,expression:"deviceInfo.userNumber"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.userNumber},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo,"userNumber",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("性别")]),e._v(" "),r("el-radio",{attrs:{label:"1"},model:{value:e.deviceInfo.userGender,callback:function(t){e.$set(e.deviceInfo,"userGender",t)},expression:"deviceInfo.userGender"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"0"},model:{value:e.deviceInfo.userGender,callback:function(t){e.$set(e.deviceInfo,"userGender",t)},expression:"deviceInfo.userGender"}},[e._v("女")])],1),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("出生日期")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.userBirth,expression:"deviceInfo.userBirth"}],attrs:{type:"date"},domProps:{value:e.deviceInfo.userBirth},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo,"userBirth",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("家庭住址")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.userAddress,expression:"deviceInfo.userAddress"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.userAddress},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo,"userAddress",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"contact"},[r("el-row",[r("label",{attrs:{for:""}},[e._v("紧急联系人1")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[0].emergencycsName,expression:"deviceInfo.emergencycs[0].emergencycsName"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[0].emergencycsName},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[0],"emergencycsName",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("关系")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[0].emergencycsRelationShip,expression:"deviceInfo.emergencycs[0].emergencycsRelationShip"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[0].emergencycsRelationShip},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[0],"emergencycsRelationShip",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("联系电话")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[0].emergencycsNumber,expression:"deviceInfo.emergencycs[0].emergencycsNumber"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[0].emergencycsNumber},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[0],"emergencycsNumber",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[0].emergencycrsNumber1,expression:"deviceInfo.emergencycs[0].emergencycrsNumber1"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[0].emergencycrsNumber1},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[0],"emergencycrsNumber1",t.target.value)}}})]),e._v(" "),e.deviceInfo.emergencycs[1]?r("div",[r("el-row",[r("label",{attrs:{for:""}},[e._v("紧急联系人2")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[1].emergencycsName,expression:"deviceInfo.emergencycs[1].emergencycsName"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[1].emergencycsName},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[1],"emergencycsName",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("关系")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[1].emergencycsRelationShip,expression:"deviceInfo.emergencycs[1].emergencycsRelationShip"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[1].emergencycsRelationShip},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[1],"emergencycsRelationShip",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}},[e._v("联系电话")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[1].emergencycsNumber,expression:"deviceInfo.emergencycs[1].emergencycsNumber"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[1].emergencycsNumber},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[1],"emergencycsNumber",t.target.value)}}})]),e._v(" "),r("el-row",[r("label",{attrs:{for:""}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceInfo.emergencycs[1].emergencycrsNumber1,expression:"deviceInfo.emergencycs[1].emergencycrsNumber1"}],attrs:{type:"text"},domProps:{value:e.deviceInfo.emergencycs[1].emergencycrsNumber1},on:{input:function(t){t.target.composing||e.$set(e.deviceInfo.emergencycs[1],"emergencycrsNumber1",t.target.value)}}})])],1):e._e()],1)])],1)},staticRenderFns:[]};var a={data:function(){return{type:{add:"新增设备",editor:"修改设备"},deviceQuery:"",devices:[],filterDevices:[],isShowAddDevice:!1,isShowEditorDevice:!1,selectDevice:{index:"",row:[]},selects:[{title:"全部",statu:-1},{title:"离线",statu:0},{title:"在线",statu:1}],currentStatu:1,currentPage:1,paginationData:[],pageSize:8}},components:{ChangeDevice:r("VU/8")(c,i,!1,function(e){r("Oh7c")},"data-v-d09e94d0",null).exports},created:function(){this.getDevices()},watch:{deviceQuery:function(e){e||(this.currentStatu=1,this.getDevices())}},methods:{getDevices:function(){var e=this;this.$http.get(config.httpBaseUrl+"/user/getAll").then(function(t){200===t.code&&(e.devices=t.date.users,e.filterDevices=t.date.users,e.handleCurrentChange(e.currentPage))})},handleAddDevice:function(){this.isShowAddDevice=!0},addDevice:function(e,t){var r=this;t.userDeviceId=t.userDeviceId.split("").filter(function(e,t){return 0!==t&&3!==t&&6!==t&&10!==t&&14!==t}).join(""),e&&this.$http.post(config.httpBaseUrl+"/user/insertuser",t).then(function(e){200===e.code&&(r.getDevices(),r.$message({showClose:!0,type:"success",message:"添加设备成功!"}))}),this.isShowAddDevice=!1},handleEditorDevice:function(e,t){this.selectDevice.index=e,this.selectDevice.row=t,delete this.selectDevice.row.userAvatar,delete this.selectDevice.row.maplocation,delete this.selectDevice.row.userActivationtime,delete this.selectDevice.row.userId,delete this.selectDevice.row.userStatus,this.isShowEditorDevice=!0},editorDevice:function(e,t){var r=this;if(this.isShowEditorDevice=!1,e){for(var s in t)if(!t[s])return this.$message({showClose:!0,type:"error",message:"所填信息不能为空!"});this.$http.post(config.httpBaseUrl+"/user/update",t).then(function(e){200===e.code&&(r.$message({showClose:!0,type:"success",message:"修改成功!"}),r.getDevices())})}},handleDeleteDevice:function(e,t){var r=this;this.$confirm("此操作将永久删除该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$http.get(config.httpBaseUrl+"/user/deleteUser",{params:{userDeviceId:t}}).then(function(t){r.devices.splice(e,1),r.currentPage=1,r.handleCurrentChange(r.currentPage),r.$message({showClose:!0,type:"success",message:"删除成功!"})})}).catch(function(){r.$message({showClose:!0,type:"info",message:"已取消删除"})})},handleSelect:function(e,t){switch(this.currentStatu=t+1,this.filterDevices=[],this.deviceQuery="",e){case-1:this.filterDevices=this.devices;break;case 0:this.filterDevices=this.devices.filter(function(e){return 0===e.userStatus});break;case 1:this.filterDevices=this.devices.filter(function(e){return 1===e.userStatus})}this.handleCurrentChange(this.currentPage)},handleSearchDevice:function(){var e=this;this.currentStatu=1,this.filterDevices=[],this.filterDevices=this.devices.filter(function(t){return-1!==t.userName.indexOf(e.deviceQuery)||-1!==t.userDeviceId.indexOf(e.deviceQuery)}),this.handleCurrentChange(this.currentPage)},tableRowStyle:function(e,t){return"background-color: black;"},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: black; color: white"},getPaginationData:function(e){var t=(e-1)*this.pageSize,r=e*this.pageSize;this.paginationData=this.filterDevices.slice(t,r)},handleCurrentChange:function(e){this.currentPage=e,this.getPaginationData(e)}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"DeviceManagement"},[s("el-row",{staticClass:"header"},[s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.deviceQuery,expression:"deviceQuery"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"请输入人名设备ID"},domProps:{value:e.deviceQuery},on:{input:function(t){t.target.composing||(e.deviceQuery=t.target.value)}}}),e._v(" "),s("span",{staticClass:"searchBtn",on:{click:e.handleSearchDevice}},[s("img",{attrs:{src:r("F7VF"),alt:""}})])]),e._v(" "),s("div",{staticClass:"radio"},e._l(e.selects,function(t,r){return s("div",{key:r,class:{active:e.currentStatu===r+1},on:{click:function(s){return e.handleSelect(t.statu,r)}}},[s("span",{staticClass:"radius"}),e._v(" "),s("span",{staticClass:"title all"},[e._v(e._s(t.title))])])}),0),e._v(" "),s("div",{staticClass:"legends"},[s("span",{on:{click:e.handleAddDevice}},[s("img",{attrs:{src:r("L6uk"),alt:""}}),e._v("\n        新增\n      ")])])]),e._v(" "),s("el-main",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paginationData,border:"","row-style":e.tableRowStyle,"header-cell-style":e.tableHeaderColor,size:"mini"}},[s("el-table-column",{attrs:{align:"center",prop:"userName",label:"佩戴人"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"userDeviceId",label:"设备ID"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"userActivationtime",label:"激活时间"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",prop:"userNumber",label:"联系电话"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(0==t.row.userStatus?"离线":"在线"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEditorDevice(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleDeleteDevice(t.$index,t.row.userDeviceId)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":e.currentPage,"page-count":e.devices.length/5,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.devices.length},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),e.isShowAddDevice?s("change-device",{attrs:{type:e.type.add},on:{addDevice:e.addDevice}}):e._e(),e._v(" "),e.isShowEditorDevice?s("change-device",{attrs:{type:e.type.editor,selectDevice:e.selectDevice},on:{editorDevice:e.editorDevice}}):e._e()],1)},staticRenderFns:[]};var l=r("VU/8")(a,o,!1,function(e){r("Zw6q")},"data-v-e382a10e",null);t.default=l.exports}});
//# sourceMappingURL=4.40227cf3b434760c64bd.js.map